<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Marina | Sandy Shores</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <div class="bubbles-container">
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
        <div class="bubble"></div><div class="bubble"></div><div class="bubble"></div>
    </div>

    <div class="main-wrapper">
        
        <section id="event-display-container" class="interactive-element" style="display: none;">
            </section>

        <header class="hero interactive-element">
            <img src="Marina-Square-Samdy-Shores-v1.png" alt="The Marina Logo" class="main-logo" onerror="this.style.display='none'; document.write('<h1 style=\'font-size:3rem;\'>The Marina</h1>')">
        </header>

        <section id="team-section" class="interactive-element">
            <div id="all-staff-container" class="team-row-single">
                <p style="color: white;">Loading Crew...</p>
            </div>
        </section>

        <section id="about-section" class="interactive-element">
            <h2>Welcome to The Marina</h2>
            <p>
                Located in the heart of Sandy Shores, The Marina serves up the freshest catch in San Andreas. 
                Whether you're here for our famous Lobster Tail or just to enjoy the vibes, 
                our crew is dedicated to making every visit a splash!
            </p>
        </section>

        <section class="actions interactive-element">
            <button onclick="openModal('menu-modal')" class="btn btn-primary">Our Menu</button>
            <button onclick="openModal('reservation-modal')" class="btn btn-secondary">Reservations</button>
            <button onclick="openModal('rental-modal')" class="btn btn-accent">Rentals</button>
            <button onclick="openModal('application-modal')" class="btn btn-secondary">Join the Crew</button>
        </section>

        <footer class="interactive-element">
            <button id="admin-login-btn" onclick="openModal('login-modal')">Staff Login</button>
        </footer>

    </div>

    <div id="menu-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('menu-modal')">&times;</span>
            <h2>Fresh Catch Menu</h2>
            <ul id="public-menu-list">
                <li>Loading Menu from Database...</li>
            </ul>
        </div>
    </div>

    <div id="reservation-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('reservation-modal')">&times;</span>
            <h2>Table Reservation</h2>
            <form id="reservation-form">
                <label>Name:</label> <input type="text" id="res-name" required>
                <label>Phone:</label> <input type="text" id="res-phone" required>
                <label>Date:</label> <input type="datetime-local" id="res-date" required>
                <label>Size:</label> <input type="number" id="res-size" min="1" max="20" required>
                <button type="submit" class="btn btn-primary">Book Now</button>
            </form>
        </div>
    </div>

    <div id="rental-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('rental-modal')">&times;</span>
            <h2>Venue Rental Inquiry</h2>
            <form id="rental-form">
                <label>Name:</label> <input type="text" id="rent-name" required>
                <label>Type:</label> <input type="text" id="rent-type" placeholder="Event Type">
                <label>Staffing?</label>
                <select id="rent-staffing">
                    <option value="yes">Yes</option>
                    <option value="no">No</option>
                </select>
                <button type="submit" class="btn btn-accent">Submit Inquiry</button>
            </form>
        </div>
    </div>

    <div id="application-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('application-modal')">&times;</span>
            <h2>Job Application</h2>
            <form id="application-form">
                <label>Discord Name:</label> <input type="text" id="app-discord" placeholder="Example#1234" required>
                <label>First & Last Name:</label> <input type="text" id="app-ic-name" required>
                <div style="display:flex; gap:10px;">
                    <div style="flex:1;"><label>State ID:</label> <input type="number" id="app-id" required></div>
                    <div style="flex:1;"><label>Phone:</label> <input type="text" id="app-phone" required></div>
                </div>
                <label>Availability:</label>
                <select id="app-storm">
                    <option value="EU">EU Storm</option>
                    <option value="NA">NA Storm</option>
                    <option value="AU">AU Storm</option>
                    <option value="Flexible">Flexible / Mixed</option>
                </select>
                <label>Experience:</label> <textarea id="app-exp" rows="3"></textarea>
                <label>Motivation:</label> <textarea id="app-mot" rows="3"></textarea>
                <button type="submit" class="btn btn-accent">Submit Application</button>
            </form>
        </div>
    </div>

    <div id="login-modal" class="modal">
        <div class="modal-content small-modal">
            <span class="close" onclick="closeModal('login-modal')">&times;</span>
            <h2>Staff Access</h2>
            <input type="password" id="admin-code" placeholder="Code">
            <button onclick="attemptLogin()" class="btn btn-primary">Login</button>
            <p id="login-error" class="error-text"></p>
        </div>
    </div>

    <div id="admin-panel" class="modal fullscreen-modal">
        <div class="modal-content fullscreen-content">
            <div class="admin-header">
                <h2 id="admin-title">Admin Panel</h2>
                <button onclick="logout()" class="btn btn-danger">Logout</button>
            </div>
            <div class="admin-tabs">
                <button class="tab-btn active" onclick="switchTab('tab-reservations')">Reservations</button>
                <button class="tab-btn" onclick="switchTab('tab-events')">Events</button>
                <button class="tab-btn" onclick="switchTab('tab-menu-view')">Menu View</button>
                <button class="tab-btn super-only" onclick="switchTab('tab-financials')">Finance</button>
                <button class="tab-btn super-only" onclick="switchTab('tab-edit-site')">Edit Team</button>
            </div>
            
            <div id="tab-reservations" class="tab-content active">
                <h3>Incoming Reservations</h3>
                <div class="table-scroll-wrapper">
                    <table class="data-table">
                        <thead><tr><th>Name</th><th>Date</th><th>Size</th><th>Phone</th><th>Action</th></tr></thead>
                        <tbody id="admin-res-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="tab-events" class="tab-content">
                <h3>Create New Event</h3>
                <div style="background:#f9f9f9; padding:15px; border-radius:10px; border:1px solid #ddd; margin-bottom:20px;">
                    <div style="display:flex; gap:10px;">
                        <div style="flex:1;">
                            <label>Event Title:</label> <input type="text" id="evt-title" placeholder="e.g. Lobster Night">
                        </div>
                        <div style="flex:1;">
                            <label>Date & Time:</label> <input type="datetime-local" id="evt-date">
                        </div>
                    </div>
                    <label>Image URL (Flyer):</label> <input type="text" id="evt-img" placeholder="https://imgur.com/...">
                    <label>Location:</label> <input type="text" id="evt-loc" placeholder="e.g. Main Hall or Balcony">
                    <label>Description:</label> <textarea id="evt-desc" rows="2"></textarea>
                    
                    <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                        <input type="checkbox" id="evt-is-dinner" style="width:auto; margin:0;"> 
                        Is this a Dinner Service? (Adds 'Book Table' button)
                    </label>
                    <br>
                    <button onclick="createNewEvent()" class="btn btn-accent">Submit Event for Approval</button>
                </div>

                <h3>Event List</h3>
                <div class="table-scroll-wrapper">
                    <table class="data-table">
                        <thead><tr><th>Title</th><th>Date</th><th>Type</th><th>Status</th><th>Action</th></tr></thead>
                        <tbody id="admin-events-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="tab-menu-view" class="tab-content"><div id="admin-menu-view-list"></div></div>

            <div id="tab-financials" class="tab-content">
                <div class="table-scroll-wrapper"><table class="data-table"><tbody id="financial-body"></tbody></table></div>
                <button onclick="addNewProductRow()" class="btn btn-small">+ Add Item</button>
                <button onclick="saveFinancials()" class="btn btn-primary">Save Changes</button>
            </div>

            <div id="tab-edit-site" class="tab-content">
                <div id="edit-team-container"></div>
                <button onclick="saveTeamChanges()" class="btn btn-primary">Save Changes</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>